// List of possible diagnoses with their associated symptoms
const diagnoses = [
    { name: "Common Cold", symptoms: ["cough", "fatigue", "sore throat", "runny nose"] },
    { name: "Flu", symptoms: ["fever", "cough", "fatigue", "muscle aches"] },
    { name: "Migraine", symptoms: ["headache", "nausea", "light sensitivity", "blurred vision"] },
    { name: "COVID-19", symptoms: ["fever", "cough", "fatigue", "headache", "loss of taste"] },
    { name: "Food Poisoning", symptoms: ["nausea", "vomiting", "diarrhea", "abdominal pain"] },
    { name: "Allergies", symptoms: ["runny nose", "sneezing", "itchy eyes", "rash"] },
    { name: "Pneumonia", symptoms: ["fever", "chest pain", "cough", "shortness of breath"] },
];

// List of all diseases for the bottom section
let allDiseases = diagnoses.map(diagnosis => diagnosis.name).sort();

function filterDiagnosis() {
    // Get selected symptoms from the checkboxes
    const selectedSymptoms = Array.from(document.querySelectorAll('.symptom-checkbox:checked')).map(checkbox => checkbox.value);

    const possibleDiagnoses = [];
    const ruledOutDiseases = [];

    // Classify diagnoses based on selected symptoms
    diagnoses.forEach(diagnosis => {
        const matchSymptoms = selectedSymptoms.filter(symptom => diagnosis.symptoms.includes(symptom));
        if (matchSymptoms.length === selectedSymptoms.length) {
            possibleDiagnoses.push(diagnosis.name);
        } else {
            ruledOutDiseases.push(diagnosis.name);
        }
    });

    // Update the diagnosis list at the top
    const diagnosisList = document.getElementById('diagnosis-list');
    diagnosisList.innerHTML = ''; // Clear existing list

    possibleDiagnoses.sort().forEach(diagnosis => {
        const li = document.createElement('li');
        li.textContent = diagnosis;
        diagnosisList.appendChild(li);
    });

    // Update the list of all diseases at the bottom
    const diseaseList = document.getElementById('disease-list');
    diseaseList.innerHTML = ''; // Clear existing list

    // Move possible diagnoses to the top (green) and ruled-out diseases to the bottom (yellow)
    possibleDiagnoses.sort().forEach(disease => {
        const li = document.createElement('li');
        li.textContent = disease;
        li.classList.add('possible');
        diseaseList.appendChild(li);
    });

    ruledOutDiseases.sort().forEach(disease => {
        const li = document.createElement('li');
        li.textContent = disease;
        li.classList.add('ruled-out');
        diseaseList.appendChild(li);
    });

    // Add the remaining diseases that are not possible or ruled out
    const remainingDiseases = allDiseases.filter(disease => !possibleDiagnoses.includes(disease) && !ruledOutDiseases.includes(disease));
    remainingDiseases.forEach(disease => {
        const li = document.createElement('li');
        li.textContent = disease;
        diseaseList.appendChild(li);
    });
}

// Event listener for the "Find Diagnosis" button
document.getElementById('diagnosis-button').addEventListener('click', filterDiagnosis);
